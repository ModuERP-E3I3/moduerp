<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
 "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CompanyMapper">

    <!-- 회사 정보를 매핑하기 위한 resultMap -->
    <resultMap id="resultCompany" type="com.e3i3.moduerp.company.model.dto.Company">
        <result property="bizNumber" column="biz_number" />
        <result property="approvalCode" column="approval_code" />
        <result property="departmentId" column="department_id" />
        <result property="companyName" column="company_name" />
        <result property="createdAt" column="created_at" />
    </resultMap>

    <!-- 회사 등록용 쿼리 -->
    <insert id="insertCompany" parameterType="com.e3i3.moduerp.company.model.dto.Company">
        INSERT INTO company (biz_number, approval_code, department_id, company_name, created_at)
        VALUES (#{bizNumber}, #{approvalCode}, #{departmentId}, #{companyName}, #{createdAt})
    </insert>

    <!-- 회사 수정용 쿼리 -->
    <update id="updateCompany" parameterType="com.e3i3.moduerp.company.model.dto.Company">
        UPDATE company
        SET approval_code = #{approvalCode},
            department_id = #{departmentId},
            company_name = #{companyName},
            created_at = #{createdAt}
        WHERE biz_number = #{bizNumber}
    </update>

    <!-- 회사 삭제용 쿼리 -->
    <delete id="deleteCompany" parameterType="String">
        DELETE FROM company WHERE biz_number = #{bizNumber}
    </delete>

    <!-- 사업자 번호로 회사 조회용 쿼리 -->
    <select id="selectCompanyByBizNumber" parameterType="String" resultMap="resultCompany">
        SELECT * FROM company WHERE biz_number = #{bizNumber}
    </select>

    <!-- 모든 회사 조회용 쿼리 -->
    <select id="selectAllCompanies" resultType="com.e3i3.moduerp.company.model.dto.Company">
        SELECT * FROM company
    </select>

</mapper>
